<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<style id="auth-veil">body{visibility:hidden;background:#E2E8F0}</style>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Thiya ‚Äî Consumer & Subscriptions</title>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#F8FAFC;--bg2:#FFFFFF;--bg3:#F1F5F9;--bg4:#E2E8F0;
  --bdr:#E2E8F0;--bdr2:#CBD5E1;
  --t1:#0F172A;--t2:#1E293B;--t3:#475569;--t4:#64748B;--t5:#94A3B8;
  --o:#FF6B35;--ol:#FF8F55;--od:#E85520;
  --o05:rgba(255,107,53,.05);--o10:rgba(255,107,53,.1);--o15:rgba(255,107,53,.15);--o20:rgba(255,107,53,.2);--o30:rgba(255,107,53,.3);--o50:rgba(255,107,53,.5);
  --g:#16a34a;--g10:rgba(22,163,74,.08);--g20:rgba(22,163,74,.15);
  --r:#dc2626;--r10:rgba(220,38,38,.08);
  --b:#3b82f6;--b10:rgba(59,130,246,.08);
  --sky:#0ea5e9;--sky10:rgba(14,165,233,.08);--sky20:rgba(14,165,233,.15);
  --wa:#25D366;--wa10:rgba(37,211,102,.08);--wa20:rgba(37,211,102,.15);
  --sora:'Sora',sans-serif;--out:'Outfit',sans-serif;
}
body{font-family:var(--out);background:#E2E8F0;color:var(--t1);min-height:100vh;-webkit-font-smoothing:antialiased}
::selection{background:var(--o20);color:var(--t1)}

.shell{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px 12px;background:linear-gradient(145deg,#E2E8F0,#CBD5E1)}
.phone{width:393px;max-width:100%;height:852px;max-height:95vh;background:var(--bg);border-radius:44px;border:1px solid var(--bdr);overflow:hidden;position:relative;box-shadow:0 25px 60px -12px rgba(0,0,0,.15),0 0 0 1px rgba(255,255,255,.8) inset}
.pi{height:100%;position:relative;overflow:hidden}
.island{width:126px;height:34px;background:#1a1a1a;border-radius:20px;position:absolute;top:8px;left:50%;transform:translateX(-50%);z-index:50}
.sbar{position:absolute;top:0;left:0;right:0;height:54px;z-index:45;display:flex;justify-content:space-between;align-items:flex-end;padding:0 28px 6px;font-size:11px;font-weight:600;color:var(--t1)}
.hind{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);width:134px;height:5px;background:var(--t1);border-radius:3px;opacity:.12;z-index:50}

/* Screens */
.sc{position:absolute;inset:0;display:flex;flex-direction:column;opacity:0;pointer-events:none;transition:all .5s cubic-bezier(.4,0,.2,1);transform:translateX(30px)}
.sc.on{opacity:1;pointer-events:auto;transform:none}
.bd{flex:1;overflow-y:auto;overflow-x:hidden;padding:0 24px 110px;-webkit-overflow-scrolling:touch}
.bd::-webkit-scrollbar{display:none}

/* Topbar */
.top{height:56px;display:flex;align-items:center;justify-content:center;padding:0 20px;border-bottom:1px solid var(--bdr);flex-shrink:0;background:rgba(248,250,252,.92);backdrop-filter:blur(20px);position:relative;z-index:15}
.top-bk{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--o);cursor:pointer;padding:4px 8px;border-radius:8px}
.top-bk:active{background:var(--o05)}
.top-t{font-family:var(--sora);font-weight:600;font-size:14px;color:var(--t2)}
.top-r{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:var(--o);cursor:pointer;font-family:var(--sora);font-weight:700;font-size:13px}
.top-r:active{opacity:.6}
.logo-bar{height:56px;display:flex;align-items:center;justify-content:center;padding:0 20px;border-bottom:1px solid var(--bdr);flex-shrink:0;background:rgba(248,250,252,.92);backdrop-filter:blur(20px);position:relative;z-index:15}

/* ‚ïê‚ïê‚ïê THIYA AI BUBBLE ‚ïê‚ïê‚ïê */
.tb{display:flex;gap:10px;align-items:flex-start;margin:14px 0;animation:tbIn .6s cubic-bezier(.4,0,.2,1)}
@keyframes tbIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.tb-av{flex-shrink:0;width:38px;height:38px;border-radius:50%;background:linear-gradient(135deg,var(--o),var(--od));display:flex;align-items:center;justify-content:center;position:relative}
.tb-av::before{content:'';position:absolute;inset:-3px;border-radius:50%;border:1.5px solid var(--o20);animation:aiRing 3s ease-in-out infinite}
.tb-av::after{content:'';position:absolute;inset:-7px;border-radius:50%;border:1px solid var(--o10);animation:aiRing 3s ease-in-out .5s infinite}
@keyframes aiRing{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}
.tb-bub{flex:1;background:var(--bg2);border:1px solid var(--bdr);border-radius:18px 18px 18px 4px;padding:13px 16px;box-shadow:0 2px 8px rgba(0,0,0,.04);position:relative;overflow:hidden}
.tb-bub::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--o),var(--ol),transparent);opacity:.5}
.tb-nm{font-family:var(--sora);font-size:9px;font-weight:700;color:var(--o);letter-spacing:1.5px;margin-bottom:5px;text-transform:uppercase;display:flex;align-items:center;gap:5px}
.tb-nm .ai-dot{width:5px;height:5px;border-radius:50%;background:var(--o);animation:aiPulse 2s ease infinite}
@keyframes aiPulse{0%,100%{opacity:.4}50%{opacity:1}}
.tb-tx{font-size:13px;line-height:1.65;color:var(--t3)}

/* Tabs */
.tabs{display:flex;border-bottom:1px solid var(--bdr);flex-shrink:0;background:var(--bg2)}
.tab{flex:1;text-align:center;padding:12px 8px;font-size:12px;font-weight:500;color:var(--t5);cursor:pointer;position:relative;transition:.2s}
.tab.on{color:var(--o);font-weight:700}
.tab.on::after{content:'';position:absolute;bottom:0;left:20%;right:20%;height:2.5px;background:var(--o);border-radius:2px}
.tab:active{background:var(--o05)}

/* Form */
.fld{margin-bottom:16px}
.fl{font-size:12px;font-weight:600;color:var(--t4);margin-bottom:7px;display:flex;align-items:center;gap:5px}
.fl .rq{color:var(--o);font-size:8px}.fl .op{color:var(--t5);font-size:10px;font-weight:400}
.inp{width:100%;background:var(--bg2);border:1.5px solid var(--bdr);border-radius:14px;padding:14px 16px;font-size:15px;color:var(--t1);outline:none;transition:.25s;font-family:inherit}
.inp:focus{border-color:var(--o);box-shadow:0 0 0 3px var(--o10)}
.inp::placeholder{color:var(--t5)}
.ph-row{display:flex;gap:8px}.ph-pre{background:var(--o05);border:1.5px solid var(--o15);border-radius:14px;padding:14px 16px;font-size:15px;font-weight:700;color:var(--o);font-family:var(--sora)}

/* Chips */
.chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.chip{padding:10px 16px;border-radius:14px;font-size:13px;font-weight:500;border:1.5px solid var(--bdr);background:var(--bg2);color:var(--t3);cursor:pointer;transition:.25s;display:flex;align-items:center;gap:7px;user-select:none;box-shadow:0 1px 2px rgba(0,0,0,.03)}
.chip:active{transform:scale(.96)}.chip.on{border-color:var(--o);background:var(--o05);color:var(--od);font-weight:600;box-shadow:0 0 0 1px var(--o15),0 2px 8px var(--o10)}

/* Buttons */
.btn{width:100%;padding:16px;border:none;border-radius:16px;font-size:15px;font-weight:700;font-family:var(--out);cursor:pointer;transition:.25s;letter-spacing:.2px;position:relative;overflow:hidden}
.btn:active{transform:scale(.98)}
.btn-o{background:linear-gradient(135deg,var(--o),var(--od));color:#fff;box-shadow:0 4px 16px var(--o30)}
.btn-o:disabled{opacity:.25;cursor:not-allowed;box-shadow:none;transform:none}
.btn-g{background:linear-gradient(135deg,var(--g),#15803d);color:#fff;box-shadow:0 4px 16px rgba(22,163,74,.25)}
.btn-wa{background:linear-gradient(135deg,var(--wa),#128C7E);color:#fff;box-shadow:0 4px 16px rgba(37,211,102,.3)}
.btn-sky{background:linear-gradient(135deg,var(--sky),#0284c7);color:#fff;box-shadow:0 4px 16px rgba(14,165,233,.3)}
.btn-ghost{background:var(--bg2);border:1.5px solid var(--bdr);color:var(--t3);border-radius:16px;padding:14px;font-size:14px;font-weight:600;cursor:pointer;font-family:var(--out);width:100%}
.btn-ghost:active{background:var(--bg3)}
.btn-txt{background:none;border:none;color:var(--t5);font-size:12px;text-align:center;padding:10px;cursor:pointer;font-family:var(--out);font-weight:500}
.btn-row{display:flex;gap:10px}.btn-row .btn{flex:1}

/* Customer cards */
.cc{background:var(--bg2);border:1.5px solid var(--bdr);border-radius:16px;padding:16px;margin-bottom:10px;cursor:pointer;transition:.25s;box-shadow:0 1px 3px rgba(0,0,0,.04);position:relative;overflow:hidden}
.cc:active{transform:scale(.98)}
.cc.act{border-left:4px solid var(--g)}
.cc.pen{border-left:4px solid var(--od)}
.cc .badge{padding:3px 10px;border-radius:8px;font-size:10px;font-weight:700;letter-spacing:.3px}
.badge-act{background:var(--g10);color:var(--g)}.badge-pen{background:var(--o05);color:var(--od)}.badge-sky{background:var(--sky10);color:var(--sky)}

/* Status banners */
.banner{border-radius:14px;padding:14px 16px;margin:14px 0;display:flex;align-items:center;gap:12px;font-size:13px}
.banner-g{background:rgba(22,163,74,.06);border:1.5px solid var(--g20)}.banner-g .bi{color:var(--g)}
.banner-o{background:var(--o05);border:1.5px solid var(--o15)}.banner-o .bi{color:var(--od)}
.banner-b{background:rgba(59,130,246,.06);border:1.5px solid rgba(59,130,246,.15)}.banner-b .bi{color:var(--b)}
.bi{font-size:20px;flex-shrink:0}

/* WhatsApp preview */
.wa-wrap{background:#ECE5DD;border-radius:18px;overflow:hidden;margin:14px 0;box-shadow:0 4px 16px rgba(0,0,0,.08)}
.wa-head{background:#075E54;color:#fff;padding:12px 16px;display:flex;align-items:center;gap:10px}
.wa-av{width:34px;height:34px;border-radius:50%;background:#128C7E;display:flex;align-items:center;justify-content:center;font-size:16px}
.wa-bub{background:#fff;border-radius:14px 14px 14px 4px;padding:14px 16px;margin:12px;box-shadow:0 1px 4px rgba(0,0,0,.08);font-size:13px;line-height:1.7;color:var(--t2)}
.wa-time{font-size:10px;color:var(--t5);text-align:right;margin-top:6px}
.wa-btns{display:flex;flex-direction:column;gap:6px;margin-top:10px}
.wa-btn{background:var(--bg2);border:1.5px solid var(--wa);color:var(--wa);border-radius:10px;padding:10px;text-align:center;font-size:13px;font-weight:600;cursor:pointer;transition:.2s}
.wa-btn:active{background:var(--wa10)}.wa-btn.rej{border-color:var(--r);color:var(--r)}
.wa-btn.rej:active{background:var(--r10)}

/* Subscription cards */
.sub-item{background:var(--bg2);border:1.5px solid var(--bdr);border-radius:16px;padding:16px;margin-bottom:10px;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.qty-ctrl{display:flex;align-items:center;gap:12px;margin:8px 0}
.qty-b{width:36px;height:36px;border-radius:12px;border:1.5px solid var(--bdr);background:var(--bg2);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;font-weight:700;color:var(--t3);transition:.15s}
.qty-b:active{background:var(--o05);border-color:var(--o15)}.qty-v{font-family:var(--sora);font-size:22px;font-weight:800;color:var(--t1);min-width:28px;text-align:center}

/* Schedule chips */
.sch{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin:8px 0}
.sch-c{padding:10px 8px;border-radius:12px;font-size:12px;font-weight:500;border:1.5px solid var(--bdr);background:var(--bg2);color:var(--t3);cursor:pointer;text-align:center;transition:.2s}
.sch-c:active{transform:scale(.96)}.sch-c.on{border-color:var(--sky);background:var(--sky10);color:var(--sky);font-weight:700}

/* Day chips (for CUSTOM schedule) */
.days{display:flex;gap:6px;margin:8px 0;flex-wrap:wrap}
.day{width:40px;height:40px;border-radius:12px;border:1.5px solid var(--bdr);background:var(--bg2);display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:var(--t4);cursor:pointer;transition:.2s}
.day:active{transform:scale(.92)}.day.on{border-color:var(--sky);background:var(--sky10);color:var(--sky)}

/* Walking loader */
.wl{position:relative;height:30px;overflow:hidden;margin:14px 0}
.wl-trk{position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--bdr);border-radius:2px}
.wl-fl{position:absolute;bottom:0;left:0;height:3px;background:linear-gradient(90deg,var(--o),var(--ol));border-radius:2px;animation:wlF 2.5s ease-in-out}
@keyframes wlF{0%{width:0}100%{width:100%}}

/* Success */
.suc{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 24px 24px;min-height:100%}
.ck{width:88px;height:88px;border-radius:50%;display:flex;align-items:center;justify-content:center;animation:ckB .6s cubic-bezier(.34,1.56,.64,1);margin-bottom:20px}
@keyframes ckB{0%{transform:scale(0)}60%{transform:scale(1.15)}100%{transform:scale(1)}}
.sum{background:var(--bg2);border:1px solid var(--bdr);border-radius:18px;padding:20px;width:100%;max-width:320px;margin:14px 0;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.sr{display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid var(--bdr)}.sr:last-child{border:none}
.sk{font-size:12px;color:var(--t4)}.sv{font-size:12px;color:var(--t1);font-weight:600;text-align:right;max-width:60%}
.cfw{position:absolute;top:0;left:0;right:0;height:200px;pointer-events:none;overflow:hidden}
.cf{position:absolute;opacity:0}
@keyframes cfD{0%{transform:translateY(0) rotate(0);opacity:1}100%{transform:translateY(180px) rotate(var(--rot));opacity:0}}

/* Empty state */
.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:50px 24px}
.empty-ic{width:88px;height:88px;border-radius:28px;background:var(--o05);display:flex;align-items:center;justify-content:center;margin-bottom:18px;position:relative}
.empty-ic::before{content:'';position:absolute;inset:-6px;border-radius:32px;border:1.5px solid var(--o10);animation:aiRing 3s ease infinite}

/* Floating Thiya */
#ft{position:absolute;bottom:20px;right:20px;z-index:20;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all .4s}
#ft.hide{opacity:0;pointer-events:none;transform:translateY(20px) scale(.8)}
.ft-ring{width:60px;height:60px;border-radius:16px;background:linear-gradient(135deg,var(--o),var(--od));display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 8px 24px var(--o30)}
.ft-ring::before{content:'';position:absolute;inset:-4px;border-radius:20px;border:1.5px solid var(--o20);animation:aiRing 3s ease infinite}
.ft-ring:active{transform:scale(.92)}

/* Chat overlay */
#chat{position:absolute;inset:0;z-index:40;background:var(--bg);display:flex;flex-direction:column;opacity:0;pointer-events:none;transition:.35s;transform:translateY(16px)}
#chat.on{opacity:1;pointer-events:auto;transform:none}
.ch-head{padding:60px 24px 18px;border-bottom:1px solid var(--bdr);display:flex;flex-direction:column;align-items:center;flex-shrink:0;background:var(--bg2);position:relative}
.ch-close{position:absolute;top:60px;right:18px;padding:6px;cursor:pointer;border-radius:8px;color:var(--t5)}
.ch-name{font-family:var(--sora);font-size:16px;font-weight:600;color:var(--t2);margin-top:8px}
.ch-st{font-size:11px;color:var(--t5);margin-top:3px}
.msgs{flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:10px;background:var(--bg3)}
.msgs::-webkit-scrollbar{display:none}
.msg{display:flex;gap:8px;align-items:flex-start;animation:msgIn .35s ease}
@keyframes msgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.msg-ai .m-av{width:26px;height:26px;border-radius:9px;background:var(--o10);display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.m-bub{max-width:82%;padding:11px 15px;font-size:13px;line-height:1.6;border-radius:16px}
.msg-ai .m-bub{background:var(--bg2);color:var(--t3);border:1px solid var(--bdr);border-bottom-left-radius:4px}
.msg-user{justify-content:flex-end}
.msg-user .m-bub{background:var(--o);color:#fff;border-bottom-right-radius:4px}
.ch-inp{border-top:1px solid var(--bdr);padding:14px 18px;background:var(--bg2);flex-shrink:0}
.ch-row{display:flex;gap:8px;align-items:center}
.mic{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--o),var(--od));border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 12px var(--o30)}
.mic:active{transform:scale(.9)}
.cinp{flex:1;background:var(--bg3);border:1.5px solid var(--bdr);border-radius:22px;padding:11px 16px;font-size:13px;color:var(--t1);outline:none;font-family:var(--out)}
.cinp:focus{border-color:var(--o)}.cinp::placeholder{color:var(--t5)}
.send{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--o),var(--od));border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}

/* Animations */
@keyframes v-bounce{0%{transform:translate(0,0)}15%{transform:translate(-6px,4px)}30%{transform:translate(0,8px)}45%{transform:translate(6px,4px)}60%{transform:translate(0,0)}100%{transform:translate(0,0)}}
@keyframes step-l{0%,100%{transform:rotate(0)}25%{transform:rotate(-14deg)}75%{transform:rotate(14deg)}}
@keyframes step-r{0%,100%{transform:rotate(0)}25%{transform:rotate(14deg)}75%{transform:rotate(-14deg)}}
@keyframes idle-float{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
@keyframes blink{0%,42%,46%,100%{transform:scaleY(1)}44%{transform:scaleY(.1)}}
@keyframes walkAcross{0%{transform:translateX(-12px)}100%{transform:translateX(340px)}}
@keyframes walkBob{0%,100%{transform:translateY(0)}50%{transform:translateY(-2px)}}
@keyframes walkLeg{0%,100%{transform:rotate(0)}25%{transform:rotate(-16deg)}75%{transform:rotate(16deg)}}
@keyframes pulse-ring{0%{transform:scale(1);opacity:.3}50%{transform:scale(1.15);opacity:.6}100%{transform:scale(1);opacity:.3}}
@keyframes float-up{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}

@media(max-width:420px){.phone{width:100%;height:100vh;max-height:100vh;border-radius:0;border:none;box-shadow:none}.shell{padding:0}}
</style>
</head>
<body>
<div class="shell"><div class="phone"><div class="pi">
<div class="island"></div>
<div class="sbar"><span>10:15</span><span style="display:flex;gap:5px;align-items:center"><svg width="16" height="12" viewBox="0 0 16 12" fill="#0F172A"><rect x="0" y="4" width="3" height="8" rx="1" opacity=".3"/><rect x="4.5" y="2.5" width="3" height="9.5" rx="1" opacity=".5"/><rect x="9" y="0" width="3" height="12" rx="1" opacity=".7"/><rect x="13" y="0" width="3" height="12" rx="1"/></svg><svg width="24" height="12" viewBox="0 0 24 12" fill="none"><rect x=".5" y=".5" width="21" height="11" rx="2.5" stroke="#0F172A" stroke-opacity=".3"/><rect x="22" y="3.5" width="2" height="5" rx="1" fill="#0F172A" opacity=".4"/><rect x="2" y="2" width="16" height="8" rx="1.5" fill="#0F172A"/></svg></span></div>
<div class="hind"></div>

<!-- Reusable Thiya SVG -->
<svg style="display:none"><defs>
<g id="tAv"><circle cx="7" cy="5" r="3.5" fill="#FF6B35"/><circle cx="5.8" cy="4.7" r=".5" fill="#fff"/><circle cx="8.2" cy="4.7" r=".5" fill="#fff"/><rect x="3" y="9" width="8" height="5" rx="2" fill="#FF6B35"/><polygon points="5,14 7,17 9,14" fill="#FF6B35"/></g>
<g id="bkArr"><polyline points="15 18 9 12 15 6" fill="none" stroke="currentColor" stroke-width="2.5"/></g>
</defs></svg>

<!-- ‚ïê‚ïê‚ïê S1: CUSTOMER LIST (empty) ‚ïê‚ïê‚ïê -->
<div class="sc on" id="s1">
  <div class="logo-bar"><svg width="80" height="28" viewBox="0 0 152 52" fill="none"><text x="4" y="38" font-family="'Sora',sans-serif" font-weight="700" font-size="32" fill="#1E293B" letter-spacing="-1">th</text><g transform="translate(42,2)"><rect x="0" y="18" width="7" height="13" rx="2" fill="#FF6B35"/><polygon points="1,31 3.5,37 6,31" fill="#FF6B35"/><g style="animation:step-l 1.2s ease-in-out infinite;transform-origin:2px 37px"><line x1="1.5" y1="37" x2="-.5" y2="42" stroke="#FF6B35" stroke-width="1.5" stroke-linecap="round"/></g><g style="animation:step-r 1.2s ease-in-out infinite;transform-origin:5px 37px"><line x1="5.5" y1="37" x2="7.5" y2="42" stroke="#FF6B35" stroke-width="1.5" stroke-linecap="round"/></g><g style="animation:v-bounce 3s ease-in-out infinite"><circle cx="3.5" cy="10" r="4.5" fill="#FF6B35"/><circle cx="2" cy="9.5" r=".8" fill="#fff"/><circle cx="5" cy="9.5" r=".8" fill="#fff"/></g></g><text x="54" y="38" font-family="'Sora',sans-serif" font-weight="700" font-size="32" fill="#1E293B" letter-spacing="-1">ya</text></svg><div class="top-r" onclick="go('s2')">+ Add</div></div>
  <div class="tabs"><div class="tab on" id="tAll">All (0)</div><div class="tab" id="tAct">Active (0)</div><div class="tab" id="tPen">Pending (0)</div></div>
  <div class="bd" id="custBody">
    <div class="empty">
      <div class="empty-ic"><span style="font-size:36px">üë•</span></div>
      <h2 style="font-family:var(--sora);font-size:20px;font-weight:700;margin-bottom:6px">No customers yet</h2>
      <p style="font-size:13px;color:var(--t4);line-height:1.6;margin-bottom:20px;max-width:260px">Add your existing customers to start managing deliveries & subscriptions</p>
      <button class="btn btn-o" style="max-width:260px" onclick="go('s2')">+ Add First Customer</button>
    </div>
    <div class="tb" style="margin-top:0"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">You're live! üöÄ Now add your first customer. Say "Add Raju, 9876543210" or tap the button.</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S2: SEARCH BY PHONE ‚ïê‚ïê‚ïê -->
<div class="sc" id="s2">
  <div class="top"><div class="top-bk" onclick="go('s1')"><svg width="18" height="18" viewBox="0 0 24 24"><use href="#bkArr"/></svg></div><span class="top-t">Add Customer</span></div>
  <div class="bd" style="padding-top:20px">
    <h1 style="font-family:var(--sora);font-size:22px;font-weight:700;margin-bottom:4px">Customer's number</h1>
    <p style="font-size:13px;color:var(--t4);margin-bottom:20px">We'll check if they're already on Vinimay</p>
    <div class="fld"><div class="fl">Mobile Number <span class="rq">‚óè</span></div><div class="ph-row"><div class="ph-pre">+91</div><input class="inp" id="iCPh" type="tel" maxlength="10" placeholder="98765 43210" oninput="vCPh()"></div></div>
    <div id="phResult" style="display:none"></div>
    <button class="btn btn-o" id="bCPh" disabled onclick="goFill()" style="margin-top:8px">Continue ‚Üí</button>
    <div class="tb" style="margin-top:20px"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">Enter the customer's phone number. I'll check if they already have a Vinimay account ‚Äî makes it faster!</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S3: FILL DETAILS ‚ïê‚ïê‚ïê -->
<div class="sc" id="s3">
  <div class="top"><div class="top-bk" onclick="go('s2')"><svg width="18" height="18" viewBox="0 0 24 24"><use href="#bkArr"/></svg></div><span class="top-t">Customer Details</span></div>
  <div class="bd" style="padding-top:16px">
    <div class="fld"><div class="fl">Customer Name <span class="rq">‚óè</span></div><input class="inp" id="iCNm" placeholder="e.g. Raju Sharma" oninput="vFill()"></div>
    <div class="fld"><div class="fl">Service Type <span class="rq">‚óè</span></div><div class="chips" id="svcChips"></div></div>
    <div class="fld"><div class="fl">Delivery Address <span class="rq">‚óè</span></div><input class="inp" id="iCAd" placeholder="Flat 4B, Sai Residency, Baner" oninput="vFill()"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px"><div class="fld"><div class="fl">Pincode <span class="rq">‚óè</span></div><input class="inp" id="iCPc" type="tel" maxlength="6" placeholder="411045" oninput="vFill()"></div><div class="fld"><div class="fl">Locality</div><input class="inp" id="iCLc" placeholder="Baner"></div></div>
    <div class="fld"><div class="fl">Delivery Slot</div><div class="chips"><div class="chip on" data-v="06:00-07:00" onclick="selSlot(this)">‚è∞ 6-7 AM</div><div class="chip" data-v="07:00-08:00" onclick="selSlot(this)">‚òÄÔ∏è 7-8 AM</div><div class="chip" data-v="08:00-09:00" onclick="selSlot(this)">üåÖ 8-9 AM</div></div></div>
    <div class="fld"><div class="fl">Instructions <span class="op">(optional)</span></div><input class="inp" id="iCIns" placeholder="e.g. Ring bell twice, leave at door"></div>
    <button class="btn btn-wa" id="bInv" disabled onclick="sendInvite()"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" style="vertical-align:middle;margin-right:6px"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>Send Invite via WhatsApp</button>
    <div class="tb" style="margin-top:14px"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">Fill in the details. The customer will get a WhatsApp invite from me to confirm the connection!</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S4: INVITE SENT ‚ïê‚ïê‚ïê -->
<div class="sc" id="s4">
  <div class="top"><span class="top-t">Invite Sent</span></div>
  <div class="bd" style="padding-top:24px">
    <div style="text-align:center;margin-bottom:24px">
      <div style="width:80px;height:80px;border-radius:50%;background:var(--wa10);border:2px solid var(--wa20);display:flex;align-items:center;justify-content:center;margin:0 auto 14px;animation:ckB .6s cubic-bezier(.34,1.56,.64,1)"><span style="font-size:36px">üì§</span></div>
      <h2 style="font-family:var(--sora);font-size:22px;font-weight:700;margin-bottom:4px">Invite Sent!</h2>
      <p style="font-size:14px;color:var(--t3)">WhatsApp message sent to</p>
      <p style="font-family:var(--sora);font-size:16px;font-weight:700;color:var(--t1);margin-top:4px" id="invName">Raju Sharma</p>
      <p style="font-size:13px;color:var(--t4)" id="invPh">+91 9876543210</p>
    </div>
    <div class="banner banner-o"><span class="bi">‚è≥</span><div><div style="font-weight:600;color:var(--od)">Waiting for acceptance</div><div style="font-size:11px;color:var(--t4);margin-top:2px">Customer needs to tap "Accept" on WhatsApp</div></div></div>

    <!-- WhatsApp preview -->
    <p style="font-size:10px;font-weight:600;color:var(--t5);letter-spacing:1px;text-transform:uppercase;margin:18px 0 8px">What they'll see on WhatsApp</p>
    <div class="wa-wrap">
      <div class="wa-head"><div class="wa-av">ü§ñ</div><div><div style="font-weight:600;font-size:13px">Thiya (Vinimay)</div><div style="font-size:10px;opacity:.7">Online</div></div></div>
      <div class="wa-bub" id="waBub">
        Hi <b id="waName">Raju</b>! üëã<br><br>
        <b id="waBiz">Sharma Dairy</b> has added you as their customer on Vinimay.<br><br>
        Service: ü•õ <b id="waSvc">Milk Delivery</b><br>
        Slot: ‚è∞ <b id="waSlot">6:00 ‚Äì 7:00 AM</b><br>
        Address: <b id="waAddr">Baner, Pune</b><br><br>
        Do you want to receive deliveries from them?
        <div class="wa-time">10:15 AM ‚úì‚úì</div>
        <div class="wa-btns"><div class="wa-btn" onclick="doAccept()">‚úÖ Yes, Accept</div><div class="wa-btn rej">‚ùå No, Decline</div></div>
      </div>
    </div>
    <div class="btn-row" style="margin-top:16px"><button class="btn-ghost" onclick="go('s2')">+ Add Another</button><button class="btn btn-o" onclick="doAccept()">Simulate Accept</button></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S5: CUSTOMER ACCEPTED ‚Äî LIST WITH ACTIVE ‚ïê‚ïê‚ïê -->
<div class="sc" id="s5">
  <div class="logo-bar"><svg width="80" height="28" viewBox="0 0 152 52" fill="none"><text x="4" y="38" font-family="'Sora',sans-serif" font-weight="700" font-size="32" fill="#1E293B" letter-spacing="-1">th</text><g transform="translate(42,2)"><rect x="0" y="18" width="7" height="13" rx="2" fill="#FF6B35"/><polygon points="1,31 3.5,37 6,31" fill="#FF6B35"/><g style="animation:step-l 1.2s ease-in-out infinite;transform-origin:2px 37px"><line x1="1.5" y1="37" x2="-.5" y2="42" stroke="#FF6B35" stroke-width="1.5" stroke-linecap="round"/></g><g style="animation:step-r 1.2s ease-in-out infinite;transform-origin:5px 37px"><line x1="5.5" y1="37" x2="7.5" y2="42" stroke="#FF6B35" stroke-width="1.5" stroke-linecap="round"/></g><g style="animation:v-bounce 3s ease-in-out infinite"><circle cx="3.5" cy="10" r="4.5" fill="#FF6B35"/><circle cx="2" cy="9.5" r=".8" fill="#fff"/><circle cx="5" cy="9.5" r=".8" fill="#fff"/></g></g><text x="54" y="38" font-family="'Sora',sans-serif" font-weight="700" font-size="32" fill="#1E293B" letter-spacing="-1">ya</text></svg><div class="top-r" onclick="go('s2')">+ Add</div></div>
  <div class="tabs"><div class="tab on">All (1)</div><div class="tab">Active (1)</div><div class="tab">Pending (0)</div></div>
  <div class="bd" style="padding-top:16px">
    <div class="banner banner-g" style="margin-top:0"><span class="bi">üéâ</span><div><div style="font-weight:600;color:var(--g)"><span id="accNm">Raju Sharma</span> accepted your invite!</div><div style="font-size:11px;color:var(--t4);margin-top:2px">You can now set up their delivery plan</div></div></div>
    <div class="cc act" onclick="go('s6')">
      <div style="display:flex;align-items:flex-start;gap:12px">
        <div style="width:46px;height:46px;border-radius:14px;background:var(--g10);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0">üë§</div>
        <div style="flex:1;min-width:0">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:2px"><span style="font-size:15px;font-weight:700" id="cardNm">Raju Sharma</span><span class="badge badge-act">ACTIVE</span></div>
          <div style="font-size:12px;color:var(--t4)" id="cardPh">+91 9876543210</div>
          <div style="font-size:12px;color:var(--t4);margin-top:2px" id="cardAddr">Baner, Pune</div>
          <div style="font-size:12px;color:var(--o);font-weight:500;margin-top:4px" id="cardSvc">ü•õ Milk Delivery ¬∑ 6:00‚Äì7:00 AM</div>
        </div>
      </div>
      <div style="margin-top:12px;background:var(--sky10);border:1.5px solid var(--sky20);border-radius:12px;padding:12px 14px;display:flex;align-items:center;gap:8px;cursor:pointer">
        <span style="font-size:16px">üìã</span><div style="flex:1"><div style="font-size:13px;font-weight:600;color:var(--sky)">No subscription yet</div><div style="font-size:11px;color:var(--t4)">Tap to set up delivery plan ‚Üí</div></div><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
      </div>
    </div>
    <div class="tb"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx"><span id="accNm2">Raju</span> is on board! Now set up their delivery plan ‚Äî it's the last step before daily orders start.</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S6: CREATE SUBSCRIPTION ‚ïê‚ïê‚ïê -->
<div class="sc" id="s6">
  <div class="top"><div class="top-bk" onclick="go('s5')"><svg width="18" height="18" viewBox="0 0 24 24"><use href="#bkArr"/></svg></div><span class="top-t" id="subTopT">Set Up Plan</span></div>
  <div class="bd" style="padding-top:16px">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:20px;padding:14px;background:var(--bg2);border:1px solid var(--bdr);border-radius:16px"><div style="width:42px;height:42px;border-radius:12px;background:var(--g10);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0">üë§</div><div><div style="font-size:15px;font-weight:700" id="subNm">Raju Sharma</div><div style="font-size:12px;color:var(--t4)" id="subSvc">ü•õ Milk Delivery ¬∑ Baner, Pune</div></div></div>

    <div class="fld"><div class="fl">Start Date <span class="rq">‚óè</span></div><input class="inp" id="iStart" type="date" value="2026-03-01" style="font-size:15px"></div>
    <div class="fld"><div class="fl">Billing Cycle</div><div class="chips"><div class="chip on" data-v="MONTHLY" onclick="selBill(this)">üìÖ Monthly</div><div class="chip" data-v="WEEKLY" onclick="selBill(this)">üìÜ Weekly</div></div></div>

    <h3 style="font-family:var(--sora);font-size:16px;font-weight:700;margin:18px 0 10px;display:flex;align-items:center;gap:8px">Delivery Items <span style="font-size:11px;font-weight:400;color:var(--t5)">What to deliver daily</span></h3>
    <div id="subItems"></div>
    <button style="width:100%;padding:14px;background:transparent;border:1.5px dashed var(--bdr);border-radius:14px;color:var(--o);font-size:13px;font-weight:600;cursor:pointer;margin-top:4px;display:flex;align-items:center;justify-content:center;gap:6px;font-family:var(--out)" onclick="go('s6b')">+ Add Delivery Item</button>

    <button class="btn btn-sky" id="bAct" disabled onclick="activateSub()" style="margin-top:20px">Activate Plan ‚Üí</button>
    <div class="tb" style="margin-top:14px"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">Add items to deliver. Say "1 Amul Gold, daily" ‚Äî I'll set it up! The scheduler will auto-create orders every morning.</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S6B: ADD ITEM ‚Äî PRODUCT PICKER + SCHEDULE ‚ïê‚ïê‚ïê -->
<div class="sc" id="s6b">
  <div class="top"><div class="top-bk" onclick="go('s6')"><svg width="18" height="18" viewBox="0 0 24 24"><use href="#bkArr"/></svg></div><span class="top-t">Add Item</span></div>
  <div class="bd" style="padding-top:16px">
    <div class="fld"><div class="fl">Select Product <span class="rq">‚óè</span></div>
      <div id="prodPicker"></div>
    </div>
    <div class="fld"><div class="fl">Quantity</div>
      <div class="qty-ctrl"><div class="qty-b" onclick="chgQty(-1)">‚àí</div><div class="qty-v" id="qtyV">1</div><div class="qty-b" onclick="chgQty(1)">+</div></div>
    </div>
    <div class="fld"><div class="fl">Schedule <span class="rq">‚óè</span></div>
      <div class="sch"><div class="sch-c on" data-v="DAILY" onclick="selSch(this)">Every Day</div><div class="sch-c" data-v="ALTERNATE" onclick="selSch(this)">Alternate</div><div class="sch-c" data-v="WEEKDAYS" onclick="selSch(this)">Mon‚ÄìFri</div><div class="sch-c" data-v="WEEKEND" onclick="selSch(this)">Sat‚ÄìSun</div><div class="sch-c" data-v="CUSTOM" onclick="selSch(this)">Custom</div><div class="sch-c" data-v="MONTHLY_FIRST" onclick="selSch(this)">1st of Month</div></div>
      <div id="customDays" style="display:none"><div class="fl" style="margin-top:8px">Pick days</div><div class="days"><div class="day on" data-d="MON" onclick="togDay(this)">Mon</div><div class="day" data-d="TUE" onclick="togDay(this)">Tue</div><div class="day on" data-d="WED" onclick="togDay(this)">Wed</div><div class="day" data-d="THU" onclick="togDay(this)">Thu</div><div class="day on" data-d="FRI" onclick="togDay(this)">Fri</div><div class="day" data-d="SAT" onclick="togDay(this)">Sat</div><div class="day" data-d="SUN" onclick="togDay(this)">Sun</div></div></div>
    </div>
    <button class="btn btn-o" id="bAddItem" onclick="addSubItem()">Add to Plan</button>
    <div class="tb" style="margin-top:14px"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">Pick a product and how often to deliver it. Most milk customers get daily delivery!</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê S7: PLAN ACTIVATED ‚Äî SUCCESS ‚ïê‚ïê‚ïê -->
<div class="sc" id="s7">
  <div class="cfw" id="cW"></div>
  <div class="suc">
    <div class="ck" style="background:var(--sky10);border:2.5px solid var(--sky20)"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round"><polyline points="20 6 9 17 4 12"/></svg></div>
    <h1 style="font-family:var(--sora);font-size:26px;font-weight:800;margin-bottom:4px">Plan Activated! üéØ</h1>
    <p style="font-size:14px;color:var(--t3);max-width:280px;line-height:1.6">First delivery starts <span style="color:var(--sky);font-weight:700">tomorrow morning</span>. Orders will be auto-created daily.</p>
    <div class="sum">
      <div class="sr"><span class="sk">Customer</span><span class="sv" id="yNm">‚Äî</span></div>
      <div class="sr"><span class="sk">Service</span><span class="sv" id="ySvc2">‚Äî</span></div>
      <div class="sr"><span class="sk">Items</span><span class="sv" id="yItems">‚Äî</span></div>
      <div class="sr"><span class="sk">Schedule</span><span class="sv" id="ySched">‚Äî</span></div>
      <div class="sr"><span class="sk">Slot</span><span class="sv" id="ySlot">‚Äî</span></div>
      <div class="sr"><span class="sk">Billing</span><span class="sv" id="yBill">‚Äî</span></div>
      <div class="sr"><span class="sk">Starts</span><span class="sv" style="color:var(--sky)" id="yStart">‚Äî</span></div>
    </div>
    <div class="btn-row" style="max-width:300px;width:100%"><button class="btn-ghost" onclick="restart()">+ Add Customer</button><button class="btn btn-o" onclick="restart()">Dashboard</button></div>
    <div class="tb" style="margin-top:10px;max-width:300px;width:100%"><div class="tb-av"><svg width="16" height="18" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="tb-bub"><div class="tb-nm">Thiya <span class="ai-dot"></span></div><div class="tb-tx">Done! üéâ Tomorrow morning, <span id="yNm2">Raju</span>'s order will appear in your daily manifest automatically. No manual work needed!</div></div></div>
  </div>
</div>

<!-- Floating Thiya -->
<div id="ft" onclick="openChat()">
  <div class="ft-ring"><svg width="26" height="34" viewBox="0 0 28 44" fill="none"><rect x="5" y="16" width="10" height="12" rx="3" fill="#fff"/><polygon points="7,28 10,33 13,28" fill="#fff"/><g style="animation:step-l .8s ease-in-out infinite;transform-origin:7.5px 33px"><line x1="7.5" y1="33" x2="6" y2="38" stroke="#fff" stroke-width="1.8" stroke-linecap="round"/></g><g style="animation:step-r .8s ease-in-out infinite;transform-origin:12.5px 33px"><line x1="12.5" y1="33" x2="14" y2="38" stroke="#fff" stroke-width="1.8" stroke-linecap="round"/></g><g style="animation:idle-float 3s ease-in-out infinite"><circle cx="10" cy="9" r="6" fill="#fff"/><g style="animation:blink 4s ease-in-out infinite"><circle cx="8" cy="8.5" r="1" fill="#FF6B35"/><circle cx="12" cy="8.5" r="1" fill="#FF6B35"/></g><path d="M7.5 12 Q10 14 12.5 12" stroke="#FF6B35" stroke-width=".8" stroke-linecap="round" fill="none"/></g></svg></div>
</div>

<!-- Chat overlay -->
<div id="chat">
  <div class="ch-head">
    <div class="ch-close" onclick="closeChat()"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></div>
    <div style="position:relative;margin-bottom:4px">
      <div style="position:absolute;inset:-10px;border-radius:50%;border:1.5px solid var(--o15);animation:aiRing 3s ease infinite"></div>
      <div style="position:absolute;inset:-22px;border-radius:50%;border:1px solid var(--o10);animation:aiRing 3s ease .5s infinite"></div>
      <svg width="70" height="90" viewBox="0 0 48 66" fill="none"><rect x="12" y="28" width="14" height="20" rx="4.5" fill="#FF6B35"/><polygon points="14.5,48 19,58 23.5,48" fill="#FF6B35"/><g style="animation:step-l 1.2s ease infinite;transform-origin:16px 58px"><line x1="16" y1="58" x2="14" y2="64" stroke="#FF6B35" stroke-width="2.2" stroke-linecap="round"/></g><g style="animation:step-r 1.2s ease infinite;transform-origin:22px 58px"><line x1="22" y1="58" x2="24" y2="64" stroke="#FF6B35" stroke-width="2.2" stroke-linecap="round"/></g><g style="animation:idle-float 3s ease-in-out infinite"><circle cx="19" cy="16" r="10" fill="#FF6B35"/><g style="animation:blink 4s ease-in-out infinite"><circle cx="15.5" cy="15" r="1.7" fill="#fff"/><circle cx="22.5" cy="15" r="1.7" fill="#fff"/></g><path d="M15 21 Q19 24.5 23 21" stroke="#fff" stroke-width="1.4" stroke-linecap="round" fill="none"/></g></svg>
    </div>
    <div class="ch-name">Thiya</div>
    <p class="ch-st">AI Assistant ¬∑ Ready</p>
  </div>
  <div class="msgs" id="mBox"></div>
  <div class="ch-inp"><div class="ch-row">
    <button class="mic" onclick="doVo()"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><rect x="9" y="1" width="6" height="13" rx="3"/><path d="M5 10a7 7 0 0 0 14 0"/><line x1="12" y1="17" x2="12" y2="21"/><line x1="8" y1="21" x2="16" y2="21"/></svg></button>
    <input class="cinp" id="cIn" placeholder="Type or speak..." onkeydown="if(event.key==='Enter')sendM()">
    <button class="send" onclick="sendM()"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
  </div></div>
</div>

</div></div></div>

<script>
// State
let cust={nm:'',ph:'',svc:'',svcNm:'',slot:'06:00-07:00',addr:'',pin:'',loc:'',ins:'',found:false};
let subItems=[];let curProd='';let curQty=1;let curSch='DAILY';let curBill='MONTHLY';
let msgs=[];

// Capabilities (from vendor's existing capabilities ‚Äî M1+M2 complete)
const caps=[{id:'MILK_DELIVERY',nm:'Milk Delivery',ic:'ü•õ'},{id:'TIFFIN_SERVICE',nm:'Tiffin Service',ic:'üç±'},{id:'WATER_DELIVERY',nm:'Water Delivery',ic:'üíß'}];
const prods={MILK_DELIVERY:[{n:'Amul Gold 1L',p:70},{n:'Amul Taaza 500ml',p:28},{n:'Mother Dairy 1L',p:54},{n:'Fresh Cow Milk 1L',p:60},{n:'Amul Paneer 200g',p:90}],TIFFIN_SERVICE:[{n:'Veg Lunch Thali',p:80},{n:'Non-Veg Lunch',p:120},{n:'Diet Meal',p:100}],WATER_DELIVERY:[{n:'20L Water Can',p:40},{n:'25L Premium Can',p:55}]};
const slotLabels={'06:00-07:00':'6-7 AM','07:00-08:00':'7-8 AM','08:00-09:00':'8-9 AM'};
const schLabels={DAILY:'Daily',ALTERNATE:'Alternate Days',WEEKDAYS:'Mon‚ÄìFri',WEEKEND:'Sat‚ÄìSun',CUSTOM:'Custom',MONTHLY_FIRST:'1st of Month'};

function go(id){document.querySelectorAll('.sc').forEach(s=>s.classList.remove('on'));setTimeout(()=>{document.getElementById(id).classList.add('on');updFt(id)},80)}
function updFt(id){const ft=document.getElementById('ft');id==='s7'?ft.classList.add('hide'):ft.classList.remove('hide')}

// ‚ïê‚ïê‚ïê S2: Search by Phone
function vCPh(){const v=document.getElementById('iCPh').value.replace(/\D/g,'');const ok=v.length===10&&/^[6-9]/.test(v);document.getElementById('bCPh').disabled=!ok;
  if(ok){// Simulate search
    const r=document.getElementById('phResult');
    if(v==='9876543210'){r.style.display='block';r.innerHTML=`<div class="banner banner-g" style="margin:10px 0"><span class="bi">‚úÖ</span><div><div style="font-weight:700;color:var(--g)">Customer Found on Vinimay!</div><div style="font-size:13px;color:var(--t2);margin-top:2px"><b>Raju Sharma</b></div><div style="font-size:11px;color:var(--t4)">Already on platform ¬∑ You are linking as new vendor</div></div></div>`;cust.found=true;cust.nm='Raju Sharma'}
    else{r.style.display='block';r.innerHTML=`<div class="banner banner-b" style="margin:10px 0"><span class="bi">‚ÑπÔ∏è</span><div><div style="font-weight:600;color:var(--b)">New to Vinimay</div><div style="font-size:11px;color:var(--t4)">We'll create an account when you send the invite</div></div></div>`;cust.found=false;cust.nm=''}
  }else{document.getElementById('phResult').style.display='none'}}

// ‚ïê‚ïê‚ïê S3: Fill Details
function goFill(){cust.ph=document.getElementById('iCPh').value.replace(/\D/g,'');go('s3');
  // Build service chips
  document.getElementById('svcChips').innerHTML=caps.map((c,i)=>`<div class="chip${i===0?' on':''}" data-v="${c.id}" data-nm="${c.nm}" onclick="selSvc(this)">${c.ic} ${c.nm}</div>`).join('');
  cust.svc=caps[0].id;cust.svcNm=caps[0].nm;
  if(cust.found){document.getElementById('iCNm').value=cust.nm;document.getElementById('iCNm').style.opacity='.7'}else{document.getElementById('iCNm').value='';document.getElementById('iCNm').style.opacity='1'}
  vFill()}
function selSvc(el){el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('on'));el.classList.add('on');cust.svc=el.dataset.v;cust.svcNm=el.dataset.nm;vFill()}
function selSlot(el){el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('on'));el.classList.add('on');cust.slot=el.dataset.v}
function vFill(){const nm=document.getElementById('iCNm').value.trim();const ad=document.getElementById('iCAd').value.trim();const pc=document.getElementById('iCPc').value.trim();document.getElementById('bInv').disabled=!(nm.length>=2&&ad.length>=3&&/^\d{6}$/.test(pc)&&cust.svc)}

// ‚ïê‚ïê‚ïê S4: Send Invite
function sendInvite(){cust.nm=document.getElementById('iCNm').value.trim();cust.addr=document.getElementById('iCAd').value.trim();cust.pin=document.getElementById('iCPc').value.trim();cust.loc=document.getElementById('iCLc').value.trim()||'Pune';cust.ins=document.getElementById('iCIns').value.trim();
  document.getElementById('invName').textContent=cust.nm;document.getElementById('invPh').textContent='+91 '+cust.ph;
  document.getElementById('waName').textContent=cust.nm.split(' ')[0];document.getElementById('waBiz').textContent='Sharma Dairy';
  const svcIc=caps.find(c=>c.id===cust.svc);document.getElementById('waSvc').textContent=svcIc?svcIc.nm:'Service';
  document.getElementById('waSlot').textContent=slotLabels[cust.slot]||cust.slot;document.getElementById('waAddr').textContent=cust.loc+', Pune';
  go('s4')}

// ‚ïê‚ïê‚ïê S5: Consumer Accepts
function doAccept(){
  document.getElementById('accNm').textContent=cust.nm;document.getElementById('accNm2').textContent=cust.nm.split(' ')[0];
  document.getElementById('cardNm').textContent=cust.nm;document.getElementById('cardPh').textContent='+91 '+cust.ph;
  document.getElementById('cardAddr').textContent=cust.loc+', Pune';
  const svcIc=caps.find(c=>c.id===cust.svc);document.getElementById('cardSvc').textContent=(svcIc?svcIc.ic+' '+svcIc.nm:'Service')+' ¬∑ '+slotLabels[cust.slot];
  go('s5')}

// ‚ïê‚ïê‚ïê S6: Create Subscription
function selBill(el){el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('on'));el.classList.add('on');curBill=el.dataset.v}
function renderSubItems(){const c=document.getElementById('subItems');c.innerHTML='';subItems.forEach((it,i)=>{c.innerHTML+=`<div class="sub-item"><div style="display:flex;justify-content:space-between;align-items:center"><div style="font-size:15px;font-weight:700">${it.name}</div><div style="font-size:11px;cursor:pointer;color:var(--r);font-weight:600" onclick="rmItem(${i})">Remove</div></div><div style="display:flex;gap:8px;margin-top:6px;flex-wrap:wrap"><span style="padding:4px 10px;border-radius:8px;background:var(--bg3);font-size:12px;font-weight:600">Qty: ${it.qty}</span><span style="padding:4px 10px;border-radius:8px;background:var(--sky10);color:var(--sky);font-size:12px;font-weight:600">${schLabels[it.sch]||it.sch}</span><span style="padding:4px 10px;border-radius:8px;background:var(--o05);color:var(--od);font-size:12px;font-weight:600">‚Çπ${it.price}/unit</span></div></div>`});document.getElementById('bAct').disabled=subItems.length===0}
function rmItem(i){subItems.splice(i,1);renderSubItems()}

// ‚ïê‚ïê‚ïê S6B: Add Item
function renderProdPicker(){const p=prods[cust.svc]||[];document.getElementById('prodPicker').innerHTML=p.map((pr,i)=>`<div style="background:var(--bg2);border:1.5px solid ${curProd===pr.n?'var(--o)':'var(--bdr)'};border-radius:14px;padding:14px;margin-bottom:6px;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:12px;${curProd===pr.n?'background:var(--o05)':''}" onclick="pickProd('${pr.n}',${pr.p})"><div style="width:38px;height:38px;border-radius:10px;background:${curProd===pr.n?'var(--o10)':'var(--bg3)'};display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0">${caps.find(c=>c.id===cust.svc)?.ic||'üì¶'}</div><div style="flex:1"><div style="font-size:14px;font-weight:600">${pr.n}</div><div style="font-size:12px;color:var(--t4)">‚Çπ${pr.p}</div></div><div style="width:22px;height:22px;border-radius:7px;border:2px solid ${curProd===pr.n?'var(--o)':'var(--bdr)'};display:flex;align-items:center;justify-content:center;font-size:11px;${curProd===pr.n?'background:var(--o);color:#fff':'color:transparent'}">${curProd===pr.n?'‚úì':''}</div></div>`).join('')}
function pickProd(n,p){curProd=n;renderProdPicker()}
function chgQty(d){curQty=Math.max(1,Math.min(10,curQty+d));document.getElementById('qtyV').textContent=curQty}
function selSch(el){el.parentElement.querySelectorAll('.sch-c').forEach(c=>c.classList.remove('on'));el.classList.add('on');curSch=el.dataset.v;document.getElementById('customDays').style.display=curSch==='CUSTOM'?'block':'none'}
function togDay(el){el.classList.toggle('on')}
function addSubItem(){if(!curProd)return;const pr=(prods[cust.svc]||[]).find(p=>p.n===curProd);subItems.push({name:curProd,qty:curQty,sch:curSch,price:pr?pr.p:0});curProd='';curQty=1;renderSubItems();go('s6')}

// When entering S6 or S6B, initialize
document.querySelectorAll('.sc').forEach(s=>{const obs=new MutationObserver(()=>{if(s.classList.contains('on')){if(s.id==='s6'){document.getElementById('subTopT').textContent='Plan ‚Äî '+cust.nm.split(' ')[0];document.getElementById('subNm').textContent=cust.nm;const svcIc=caps.find(c=>c.id===cust.svc);document.getElementById('subSvc').textContent=(svcIc?svcIc.ic+' '+svcIc.nm:'')+' ¬∑ '+cust.loc+', Pune';renderSubItems()}if(s.id==='s6b'){curProd='';curQty=1;curSch='DAILY';document.getElementById('qtyV').textContent='1';document.querySelectorAll('#s6b .sch-c').forEach(c=>c.classList.remove('on'));document.querySelector('#s6b .sch-c').classList.add('on');document.getElementById('customDays').style.display='none';renderProdPicker()}}});obs.observe(s,{attributes:true,attributeFilter:['class']})});

// ‚ïê‚ïê‚ïê S7: Plan Activated
function activateSub(){document.getElementById('yNm').textContent=cust.nm;
  const svcIc=caps.find(c=>c.id===cust.svc);document.getElementById('ySvc2').textContent=svcIc?svcIc.ic+' '+svcIc.nm:'';
  document.getElementById('yItems').textContent=subItems.map(it=>it.name+' √ó'+it.qty).join(', ');
  document.getElementById('ySched').textContent=subItems.map(it=>schLabels[it.sch]).join(', ');
  document.getElementById('ySlot').textContent=slotLabels[cust.slot]||cust.slot;
  document.getElementById('yBill').textContent=curBill==='MONTHLY'?'Monthly':'Weekly';
  document.getElementById('yStart').textContent=document.getElementById('iStart').value;
  document.getElementById('yNm2').textContent=cust.nm.split(' ')[0];
  go('s7');lCf('cW')}

function lCf(wId){const w=document.getElementById(wId);w.innerHTML='';const c=['#FF6B35','#FF8F55','#0ea5e9','#5eead4','#fbbf24','#f472b6','#a78bfa','#16a34a'];for(let i=0;i<30;i++){const d=document.createElement('div');d.className='cf';d.style.cssText=`left:${10+Math.random()*80}%;top:${20+Math.random()*40}%;width:${5+Math.random()*6}px;height:${5+Math.random()*6}px;background:${c[i%c.length]};border-radius:${Math.random()>.5?'50%':'2px'};--rot:${Math.random()*720}deg;animation:cfD ${1+Math.random()*1.5}s ease-out ${Math.random()*.4}s forwards`;w.appendChild(d)}}

// Chat
function openChat(){msgs=[];renderMsgs();document.getElementById('chat').classList.add('on');document.getElementById('ft').classList.add('hide');setTimeout(()=>addAI('Namaste! Customer management mein help chahiye? Poocho!'),400)}
function closeChat(){document.getElementById('chat').classList.remove('on');document.getElementById('ft').classList.remove('hide')}
function addAI(t){msgs.push({r:'ai',t});renderMsgs()}
function addU(t){msgs.push({r:'u',t});renderMsgs()}
function renderMsgs(){const b=document.getElementById('mBox');if(!msgs.length){b.innerHTML='<div style="flex:1;display:flex;align-items:center;justify-content:center;color:var(--t5);font-size:13px">Kuch bhi poocho...</div>';return}b.innerHTML=msgs.map(m=>m.r==='u'?`<div class="msg msg-user"><div class="m-bub">${m.t}</div></div>`:`<div class="msg msg-ai"><div class="m-av"><svg width="14" height="16" viewBox="0 0 14 18" fill="none"><use href="#tAv"/></svg></div><div class="m-bub">${m.t}</div></div>`).join('');b.scrollTop=b.scrollHeight}
function sendM(){const i=document.getElementById('cIn');const t=i.value.trim();if(!t)return;i.value='';addU(t);setTimeout(()=>addAI('Samajh gayi! Main aapke liye ye kar deti hoon. Screen pe changes dekhiye.'),1200)}
function doVo(){addAI('üéôÔ∏è Voice mode ‚Äî sunao...');setTimeout(()=>{addU('"Raju ka subscription banao, 1 Amul Gold daily, 6 baje"');setTimeout(()=>addAI('Done! Maine ye set kar diya:<br>‚Ä¢ <b>Raju Sharma</b> ke liye<br>‚Ä¢ <b>Amul Gold 1L</b> √ó 1, Daily<br>‚Ä¢ Slot: 6:00‚Äì7:00 AM<br><br>Activate karoon?'),1200)},2000)}

function restart(){cust={nm:'',ph:'',svc:'',svcNm:'',slot:'06:00-07:00',addr:'',pin:'',loc:'',ins:'',found:false};subItems=[];document.querySelectorAll('.inp').forEach(i=>i.value='');document.getElementById('iCPh').value='';document.getElementById('phResult').style.display='none';go('s1')}
</script>
<script>
(function() {
  var veil = document.getElementById('auth-veil');
  if (sessionStorage.getItem('thiya_dev_session') === '1') {
    veil.remove();
  } else {
    veil.textContent = 'body{margin:0;background:#E2E8F0;font-family:sans-serif}';
    document.addEventListener('DOMContentLoaded', function() {
      document.body.innerHTML =
        '<div style="min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:28px;padding:24px;text-align:center">' +
          '<div>' +
            '<div style="width:52px;height:52px;background:#FF6B35;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;color:#fff;margin-bottom:20px">th</div>' +
            '<h2 style="color:#111;font-size:22px;font-weight:700;margin-bottom:10px">Restricted Access</h2>' +
            '<p style="color:#666;font-size:14px;line-height:1.7;max-width:300px">This resource is only accessible through the Thiya Developer Portal.</p>' +
          '</div>' +
          '<a href="developer.html" style="display:inline-block;background:#FF6B35;color:#fff;text-decoration:none;padding:13px 28px;border-radius:8px;font-size:14px;font-weight:600">Go to Developer Portal &rarr;</a>' +
        '</div>';
    });
  }
})();
</script>
</body>
</html>
